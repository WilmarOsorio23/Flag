{# Modulo/templates/base.html #}
{% load static %}
{% load custom_filters %}
<!doctype html>
<html lang="es">
  <head>
    <title>{% block titulo %}Flag Soluciones{% endblock %}</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- CSRF Token -->
    <meta name="csrf-token" content="{{ csrf_token }}">

    <!-- Bootstrap CSS v5.3.2 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <!-- Estilos -->
    <link rel="stylesheet" href="{% static 'styles.css' %}">

    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

    <!-- Plotly (si lo usas en páginas internas) -->
    <script src="https://cdn.plot.ly/plotly-3.0.0.min.js" charset="utf-8" defer></script>
  </head>
  <body>
    <div class="content-principal">
      <!-- Sidebar -->
      <nav id="sidebar">
        <div class="sidebar-header">
          <img src="{% static 'resource/logo.webp' %}" alt="Logo" class="img-fluid" loading="lazy">
          <img src="{% static 'resource/miniFlagIcon.png' %}" alt="Logo" class="img-icon">
          <button class="toggle-btn" onclick="toggleSidebar()">
            <i class="fas fa-chevron-left fa-sm"></i>
          </button>
        </div>

        <div class="content">
          <!-- INICIO -->
          <ul class="list-unstyled components">
            <li>
              <a class="nav-item nav-link sidebar-item-principal" id="Inicio" href="{% url 'inicio' %}">
                <i class="fas fa-compass"></i> <span>Inicio</span>
              </a>
            </li>
          </ul>

          {# ===================== DATOS MAESTROS ===================== #}
          {% if user|has_permission:'can_manage_actividades_pagares' or user|has_permission:'can_manage_cargos' or user|has_permission:'can_manage_certificacion' or user|has_permission:'can_manage_clientes' or user|has_permission:'can_manage_conceptos' or user|has_permission:'can_manage_consultores' or user|has_permission:'can_manage_contactos' or user|has_permission:'can_manage_costos_indirectos' or user|has_permission:'can_manage_centros_costos' or user|has_permission:'can_manage_empleados' or user|has_permission:'can_manage_empleados_estudios' or user|has_permission:'can_manage_gastos' or user|has_permission:'can_manage_horas_habiles' or user|has_permission:'can_manage_ind' or user|has_permission:'can_manage_ipc' or user|has_permission:'can_manage_linea' or user|has_permission:'can_manage_linea_cliente_centrocostos' or user|has_permission:'can_manage_modulo' or user|has_permission:'can_manage_moneda' or user|has_permission:'can_manage_perfil' or user|has_permission:'can_manage_referencias' or user|has_permission:'can_manage_tipo_documento' or user|has_permission:'can_manage_tipos_contactos' or user|has_permission:'can_manage_tipo_pagare' %}
          <ul class="list-unstyled components" data-categoria="maestros">
            <li>
              <a href="#homeSubmenuDatosMaestros" data-bs-toggle="collapse" onclick="removeCollapsive()" aria-expanded="false" class="dropdown-toggle sidebar-item-principal">
                <i class="fas fa-home"></i> <span>Datos Maestros</span>
              </a>
              <ul class="collapse list-unstyled" id="homeSubmenuDatosMaestros">
                {% if user|has_permission:'can_manage_actividades_pagares' %}
                <li><a class="nav-item nav-link" href="{% url 'actividad_pagare_index' %}"><i class="fas fa-table"></i> Actividades Maestros</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_cargos' %}
                <li><a class="nav-item nav-link" href="{% url 'cargos_index' %}"><i class="fas fa-table"></i> Cargos</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_certificacion' %}
                <li><a class="nav-item nav-link" href="{% url 'certificacion_index' %}"><i class="fas fa-table"></i> Certificacion</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_clientes' %}
                <li><a class="nav-item nav-link" href="{% url 'clientes_index' %}"><i class="fas fa-user"></i> Clientes</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_conceptos' %}
                <li><a class="nav-item nav-link" href="{% url 'conceptos_index' %}"><i class="fas fa-table"></i> Conceptos</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_consultores' %}
                <li><a class="nav-item nav-link" href="{% url 'consultores_index' %}"><i class="fas fa-table"></i> Consultores</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_contactos' %}
                <li><a class="nav-item nav-link" href="{% url 'contactos_index' %}"><i class="fas fa-table"></i> Contactos</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_costos_indirectos' %}
                <li><a class="nav-item nav-link" href="{% url 'costos_indirectos_index' %}"><i class="fas fa-table"></i> Costos Indirectos</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_centros_costos' %}
                <li><a class="nav-item nav-link" href="{% url 'centros_costos_index' %}"><i class="fas fa-table"></i> Centro Costos</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_linea_cliente_centrocostos' %}
                <li><a class="nav-item nav-link" href="{% url 'linea_cliente_centrocostos_index' %}" data-requires="can_manage_linea_cliente_centrocostos"><i class="fas fa-project-diagram"></i> Relación Línea - Cliente - CeCo</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_empleados' %}
                <li><a class="nav-item nav-link" href="{% url 'empleado_index' %}"><i class="fas fa-table"></i> Empleados</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_empleados_estudios' %}
                <li><a class="nav-item nav-link" href="{% url 'empleados_estudios_index' %}"><i class="fas fa-table"></i> Empleados Estudios</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_gastos' %}
                <li><a class="nav-item nav-link" href="{% url 'gastos_index' %}"><i class="fas fa-table"></i> Gastos</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_horas_habiles' %}
                <li><a class="nav-item nav-link" href="{% url 'horas_habiles_index' %}"><i class="fas fa-table"></i> Horas Hábiles</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_ind' %}
                <li><a class="nav-item nav-link" href="{% url 'ind_index' %}"><i class="fas fa-table"></i> IND</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_ipc' %}
                <li><a class="nav-item nav-link" href="{% url 'ipc_index' %}"><i class="fas fa-table"></i> IPC</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_linea' %}
                <li><a class="nav-item nav-link" href="{% url 'linea_index' %}"><i class="fas fa-table"></i> Línea</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_modulo' %}
                <li><a class="nav-item nav-link" href="{% url 'Modulo' %}"><i class="fas fa-table"></i> Modulo</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_moneda' %}
                <li><a class="nav-item nav-link" href="{% url 'moneda_index' %}"><i class="fas fa-table"></i> Moneda</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_perfil' %}
                <li><a class="nav-item nav-link" href="{% url 'perfil_index' %}"><i class="fas fa-table"></i> Perfil</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_referencias' %}
                <li><a class="nav-item nav-link" href="{% url 'referencia_index' %}"><i class="fas fa-table"></i> Referencias</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_tipo_documento' %}
                <li><a class="nav-item nav-link" href="{% url 'tipo_documento_index' %}"><i class="fas fa-table"></i> Tipo Documento</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_tipos_contactos' %}
                <li><a class="nav-item nav-link" href="{% url 'tipos_contactos_index' %}"><i class="fas fa-table"></i> Tipos Contactos</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_tipo_pagare' %}
                <li><a class="nav-item nav-link" href="{% url 'tipo_pagare_index' %}"><i class="fas fa-table"></i> Tipo Pagare Maestros</a></li>
                {% endif %}
              </ul>
            </li>
          </ul>
          {% endif %}

          {# ===================== INFORMES ===================== #}
          {% if user|has_permission:'can_view_informe_certificacion' or user|has_permission:'can_view_informe_empleado' or user|has_permission:'can_view_informe_salarios' or user|has_permission:'can_view_informe_estudios' or user|has_permission:'can_view_informe_consultores' or user|has_permission:'can_view_informe_tarifas_consultores' or user|has_permission:'can_view_informe_facturacion' or user|has_permission:'can_view_informe_historial_cargos' or user|has_permission:'can_view_informe_tarifas_clientes' or user|has_permission:'can_view_informe_tiempos_consultores' or user|has_permission:'can_view_informe_clientes' or user|has_permission:'can_view_informe_clientes_contratos' or user|has_permission:'can_view_informe_otros_si' or user|has_permission:'can_view_informe_pagares' or user|has_permission:'can_view_informe_facturacion_consultores' or user|has_permission:'can_view_informe_serv_consultor' or user|has_permission:'can_view_informe_facturacion_centrocostos' or user|has_permission:'can_view_informe_detalle_facturacion_consultores' %}
          <ul class="list-unstyled components" data-categoria="informes">
            <li>
              <a href="#homeSubmenuInformes" data-bs-toggle="collapse" onclick="removeCollapsive()" aria-expanded="false" class="dropdown-toggle sidebar-item-principal">
                <i class="fas fa-file-alt"></i> <span>Informes</span>
              </a>
              <ul class="collapse list-unstyled" id="homeSubmenuInformes">
                {% if user|has_permission:'can_view_informe_certificacion' %}
                <li><a class="nav-item nav-link" href="{% url 'informes_certificacion_index' %}"><i class="fas fa-certificate"></i> Informe Certificación</a></li>
                {% endif %}
                {% if user|has_permission:'can_view_informe_empleado' %}
                <li><a class="nav-item nav-link" href="{% url 'informes_empleado_index' %}"><i class="fas fa-user"></i> Informe Empleados</a></li>
                {% endif %}
                {% if user|has_permission:'can_view_informe_salarios' %}
                <li><a class="nav-item nav-link" href="{% url 'informes_salarios_index' %}"><i class="fas fa-money-bill"></i> Informe Salarios</a></li>
                {% endif %}
                {% if user|has_permission:'can_view_informe_estudios' %}
                <li><a class="nav-item nav-link" href="{% url 'informes_estudios_index' %}"><i class="fas fa-graduation-cap"></i> Informe Estudios</a></li>
                {% endif %}
                {% if user|has_permission:'can_view_informe_consultores' %}
                <li><a class="nav-item nav-link" href="{% url 'informes_consultores_index' %}"><i class="fas fa-info"></i> Informe Consultores</a></li>
                {% endif %}
                {% if user|has_permission:'can_view_informe_tarifas_consultores' %}
                <li><a class="nav-item nav-link" href="{% url 'informes_tarifas_consultores_index' %}"><i class="fas fa-comments-dollar"></i> Informe Tarifas Consultores</a></li>
                {% endif %}
                {% if user|has_permission:'can_view_informe_facturacion' %}
                <li><a class="nav-item nav-link" href="{% url 'informes_facturacion_index' %}"><i class="fas fa-comments-dollar"></i> Informe Facturacion Clientes</a></li>
                {% endif %}
                {% if user|has_permission:'can_view_informe_historial_cargos' %}
                <li><a class="nav-item nav-link" href="{% url 'informes_historial_cargos_index' %}"><i class="fas fa-comments-dollar"></i> Informe Historial Cargos</a></li>
                {% endif %}
                {% if user|has_permission:'can_view_informe_tarifas_clientes' %}
                <li><a class="nav-item nav-link" href="{% url 'informes_tarifas_clientes_index' %}"><i class="fas fa-comments-dollar"></i> Informe Tarifas Clientes</a></li>
                {% endif %}
                {% if user|has_permission:'can_view_informe_tiempos_consultores' %}
                <li><a class="nav-item nav-link" href="{% url 'informes_tiempos_consultores' %}"><i class="fas fa-file-contract"></i> Informe Tiempos Consultores</a></li>
                {% endif %}
                {% if user|has_permission:'can_view_informe_clientes' %}
                <li><a class="nav-item nav-link" href="{% url 'informes_clientes_index' %}"><i class="fas fa-user"></i> Informe Clientes</a></li>
                {% endif %}
                {% if user|has_permission:'can_view_informe_clientes_contratos' %}
                <li><a class="nav-item nav-link" href="{% url 'informes_clientes_contratos_index' %}"><i class="fas fa-file-contract"></i> Informe Clientes Contratos</a></li>
                {% endif %}
                {% if user|has_permission:'can_view_informe_otros_si' %}
                <li><a class="nav-item nav-link" href="{% url 'informes_otros_si_index' %}"><i class="fas fa-file-contract"></i> Informe Contratos Otros Si</a></li>
                {% endif %}
                {% if user|has_permission:'can_view_informe_pagares' %}
                <li><a class="nav-item nav-link" href="{% url 'informe_pagares' %}"><i class="fas fa-file-contract"></i> Informe Pagarés</a></li>
                {% endif %}
                {% if user|has_permission:'can_view_informe_facturacion_consultores' %}
                <li><a class="nav-item nav-link" href="{% url 'informes_facturacion_consultores_index' %}"><i class="fas fa-file-contract"></i> Informe Fact Consultores Línea</a></li>
                {% endif %}
                {% if user|has_permission:'can_view_informe_serv_consultor' %}
                <li><a class="nav-item nav-link" href="{% url 'informes_serv_consultor_index' %}"><i class="fas fa-file-contract"></i> Informe Fact Consultores Detalle</a></li>
                {% endif %}
                {% if user|has_permission:'can_view_informe_facturacion_centrocostos' %}
                <li><a class="nav-item nav-link" href="{% url 'informe_facturacion_CentroCostos_index' %}"><i class="fas fa-file-contract"></i> Informe Fact CeCo</a></li>
                {% endif %}
                {% if user|has_permission:'can_view_informe_detalle_facturacion_consultores' %}
                <li><a class="nav-item nav-link" href="{% url 'informe_detalle_facturacion_consultores_index' %}"><i class="fas fa-file-contract"></i> Inf detalle fact consultores</a></li>
                {% endif %}
              </ul>
            </li>
          </ul>
          {% endif %}

          {# ===================== MOVIMIENTOS ===================== #}
          {% if user|has_permission:'can_manage_clientes_contratos' or user|has_permission:'can_manage_contratos_otros_si' or user|has_permission:'can_manage_pagare' or user|has_permission:'can_manage_detalle_certificacion' or user|has_permission:'can_manage_detalle_costos_indirectos' or user|has_permission:'can_manage_detalle_gastos' or user|has_permission:'can_manage_historial_cargos' or user|has_permission:'can_manage_nomina' or user|has_permission:'can_manage_registro_tiempos' or user|has_permission:'can_manage_tarifa_clientes' or user|has_permission:'can_manage_tarifa_consultores' or user|has_permission:'can_manage_total_costos_indirectos' or user|has_permission:'can_manage_total_gastos' or user|has_permission:'can_manage_clientes_factura' or user|has_permission:'can_manage_facturacion_consultores' %}
          <ul class="list-unstyled components" data-categoria="movimientos">
            <li>
              <a href="#homeSubmenuMovimientos" data-bs-toggle="collapse" onclick="removeCollapsive()" aria-expanded="false" class="dropdown-toggle sidebar-item-principal">
                <i class="fa fa-exchange-alt"></i> <span>Movimientos</span>
              </a>
              <ul class="collapse list-unstyled" id="homeSubmenuMovimientos">
                {% if user|has_permission:'can_manage_clientes_contratos' %}
                <li><a class="nav-item nav-link" href="{% url 'clientes_contratos_index' %}"><i class="fas fa-table"></i> Clientes Contratos</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_contratos_otros_si' %}
                <li><a class="nav-item nav-link" href="{% url 'contratos_otros_si_index' %}"><i class="fas fa-table"></i> Contrato Otro Si</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_pagare' %}
                <li><a class="nav-item nav-link" href="{% url 'pagare_index' %}"><i class="fas fa-table"></i> Creación Pagare</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_detalle_certificacion' %}
                <li><a class="nav-item nav-link" href="{% url 'detalle_certificacion_index' %}"><i class="fas fa-table"></i> Detalle Certificacion</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_detalle_costos_indirectos' %}
                <li><a class="nav-item nav-link" href="{% url 'detalle_costos_indirectos_index' %}"><i class="fas fa-table"></i> Detalle Costos Indirectos</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_detalle_gastos' %}
                <li><a class="nav-item nav-link" href="{% url 'detalle_gastos_index' %}"><i class="fas fa-table"></i> Detalle Gastos</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_historial_cargos' %}
                <li><a class="nav-item nav-link" href="{% url 'historial_cargos_index' %}"><i class="fas fa-table"></i> Historial Cargos</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_nomina' %}
                <li><a class="nav-item nav-link" href="{% url 'nomina_index' %}"><i class="fas fa-table"></i> Nomina</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_registro_tiempos' %}
                <li><a class="nav-item nav-link" href="{% url 'registro_tiempos_index' %}"><i class="fas fa-table"></i> Registro Tiempos</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_tarifa_clientes' %}
                <li><a class="nav-item nav-link" href="{% url 'tarifa_clientes_index' %}"><i class="fas fa-table"></i> Tarifa Clientes</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_tarifa_consultores' %}
                <li><a class="nav-item nav-link" href="{% url 'tarifa_consultores_index' %}"><i class="fas fa-table"></i> Tarifa Consultores</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_total_costos_indirectos' %}
                <li><a class="nav-item nav-link" href="{% url 'total_costos_indirectos_index' %}"><i class="fas fa-table"></i> Total Costos Indirectos</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_total_gastos' %}
                <li><a class="nav-item nav-link" href="{% url 'total_gastos_index' %}"><i class="fas fa-table"></i> Total Gastos</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_clientes_factura' %}
                <li><a class="nav-item nav-link" href="{% url 'clientes_factura_index' %}"><i class="fas fa-table"></i> Facturación Clientes</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_facturacion_consultores' %}
                <li><a class="nav-item nav-link" href="{% url 'facturacion_consultores_index' %}"><i class="fas fa-table"></i> Facturación Consultores</a></li>
                {% endif %}
              </ul>
            </li>
          </ul>
          {% endif %}

          {# ===================== INDICADORES ===================== #}
          {% if user|has_permission:'can_view_indicadores_operatividad' or user|has_permission:'can_view_indicadores_totales' or user|has_permission:'can_view_indicadores_facturacion' or user|has_permission:'can_view_indicadores_margen_cliente' %}
          <ul class="list-unstyled components" data-categoria="indicadores">
            <li>
              <a href="#homeSubmenuIndicadores" data-bs-toggle="collapse" onclick="removeCollapsive()" aria-expanded="false" class="dropdown-toggle sidebar-item-principal">
                <i class="fa fa-chart-line"></i> <span>Indicadores</span>
              </a>
              <ul class="collapse list-unstyled" id="homeSubmenuIndicadores">
                {% if user|has_permission:'can_view_indicadores_operatividad' %}
                <li><a class="nav-item nav-link" href="{% url 'indicadores_operatividad_index' %}"><i class="fas fa-table"></i> Indicador Operatividad</a></li>
                {% endif %}
                {% if user|has_permission:'can_view_indicadores_totales' %}
                <li><a class="nav-item nav-link" href="{% url 'indicadores_totales_index' %}"><i class="fas fa-chart-line"></i> Indicadores Totales</a></li>
                {% endif %}
                {% if user|has_permission:'can_view_indicadores_facturacion' %}
                <li><a class="nav-item nav-link" href="{% url 'indicadores_facturacion_index' %}"><i class="fas fa-file-invoice-dollar"></i> Indicadores Facturación</a></li>
                {% endif %}
                {% if user|has_permission:'can_view_indicadores_margen_cliente' %}
                <li><a class="nav-item nav-link" href="{% url 'indicadores_margen_cliente_index' %}"><i class="fas fa-percentage"></i> Indicadores Margen Cliente</a></li>
                {% endif %}
              </ul>
            </li>
          </ul>
          {% endif %}

          {# ===================== ADMINISTRACIÓN ===================== #}
          {% if user|has_permission:'can_manage_roles' or user|has_permission:'can_manage_users' %}
          <ul class="list-unstyled components" data-categoria="administracion">
            <li>
              <a href="#homeSubmenuAdmin" data-bs-toggle="collapse" onclick="removeCollapsive()" aria-expanded="false" class="dropdown-toggle sidebar-item-principal">
                <i class="fas fa-cogs"></i> <span>Administración</span>
              </a>
              <ul class="collapse list-unstyled" id="homeSubmenuAdmin">
                {% if user|has_permission:'can_manage_roles' %}
                <li><a class="nav-item nav-link" href="{% url 'role_list' %}"><i class="fas fa-user-tag"></i> Gestión de Roles</a></li>
                {% endif %}
                {% if user|has_permission:'can_manage_users' %}
                <li><a class="nav-item nav-link" href="{% url 'user_list' %}"><i class="fas fa-users"></i> Gestión de Usuarios</a></li>
                {% endif %}
              </ul>
            </li>
          </ul>
          {% endif %}
        </div>

        <!-- Footer usuario -->
        <div class="sidebar-footer">
          <div class="dropdown">
            <button class="btn btn-link dropdown-toggle user-menu-btn" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
              <div class="user-avatar">
                <i class="fas fa-user-circle"></i>
              </div>
              <div class="user-info">
                <span class="user-name">{{ user.get_full_name|default:user.username }}</span>
                {% if user.role and user.role.name %}
                  <small class="user-role">{{ user.role.name }}</small>
                {% else %}
                  <small class="user-role text-warning">Sin rol asignado</small>
                {% endif %}
              </div>
            </button>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
              <li>
                <a class="dropdown-item" href="{% url 'cambiar_password' %}">
                  <i class="fas fa-key"></i> Cambiar Contraseña
                </a>
              </li>
              <li><hr class="dropdown-divider"></li>
              <li>
                <a class="dropdown-item" href="{% url 'logout' %}">
                  <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
                </a>
              </li>
            </ul>
          </div>
        </div>
      </nav>

      <!-- Contenido principal -->
      <div class="container" id="content">
        <div class="row">
          <div class="col-12">
            {% block contenido %}
              {% if messages %}
              <div class="messages">
                {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                  {{ message }}
                  <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
                {% endfor %}
              </div>
              {% endif %}
            {% endblock %}
          </div>
        </div>
      </div>
    </div>

    <!-- JS -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"></script>

    <!-- Scripts base -->
    <script src="{% static 'script.js' %}"></script>
    <script src="{% static 'JS/sidebar.js' %}"></script>
    <!-- Si quieres mantener el filtrado cliente como respaldo -->
    <script src="{% static 'JS/auth.js' %}"></script>

    <!-- Sistema de mensajes -->
    <script src="{% static 'messages.js' %}"></script>

    {% block scripts %}{% endblock %}
  </body>
</html>
